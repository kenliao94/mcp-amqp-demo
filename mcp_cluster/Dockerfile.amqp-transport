FROM node:20-slim

WORKDIR /app

COPY amazon_mq_github/mcp-amqp-transport/package*.json ./
RUN npm install

COPY amazon_mq_github/mcp-amqp-transport/ ./
RUN npm run build && npm link

RUN apt-get update && apt-get install -y python3 python3-pip && \
    pip3 install uv --break-system-packages

ENV PATH="/root/.local/bin:${PATH}"

CMD ["mcp-server-amqp-adaptor"]
